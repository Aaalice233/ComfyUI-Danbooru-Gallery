# 多人角色提示词编辑器 - 使用示例

本文档提供了多人角色提示词编辑器的详细使用示例，帮助您快速上手并充分利用其功能。

## 1. 基础使用示例

### 1.1 创建简单的双人场景

**目标**: 创建一个包含男孩和女孩的简单场景

**步骤**:
1. 在ComfyUI中添加"多人角色提示词编辑器"节点
2. 点击"添加角色"按钮，创建第一个角色
3. 编辑角色属性：
   - 名称: 女孩
   - 提示词: 1girl, long hair, blue eyes, white dress
   - 权重: 1.0
   - 颜色: #FF6B6B (红色)
4. 再次点击"添加角色"，创建第二个角色
5. 编辑角色属性：
   - 名称: 男孩
   - 提示词: 1boy, short hair, green eyes, black shirt
   - 权重: 1.0
   - 颜色: #4ECDC4 (青色)
6. 在右侧画布中调整蒙版位置：
   - 女孩蒙版: 左侧区域 (0.0-0.5, 0.0-1.0)
   - 男孩蒙版: 右侧区域 (0.5-1.0, 0.0-1.0)
7. 选择语法模式为"Attention Couple"
8. 复制生成的提示词

**生成的提示词示例**:
```
masterpiece, best quality, 1girl, long hair, blue eyes, white dress COUPLE MASK(0 0.5, 0 1) 1boy, short hair, green eyes, black shirt COUPLE MASK(0.5 1, 0 1)
```

### 1.2 使用Regional Prompts语法

**目标**: 使用Regional Prompts语法创建三人场景

**步骤**:
1. 按照基础示例创建三个角色
2. 选择语法模式为"Regional Prompts"
3. 调整蒙版位置，确保不重叠

**生成的提示词示例**:
```
1girl, long hair, blue eyes, white dress MASK(0 0.33, 0 1) AND 1boy, short hair, green eyes, black shirt MASK(0.33 0.66, 0 1) AND 1boy, blonde hair, brown eyes, blue jacket MASK(0.66 1, 0 1)
```

## 2. 高级使用示例

### 2.1 权重调整实现主次关系

**目标**: 创建一个主角突出、配角弱化的场景

**步骤**:
1. 创建两个角色
2. 调整权重：
   - 主角 (女孩): 权重 1.5
   - 配角 (男孩): 权重 0.8
3. 其他设置保持不变

**生成的提示词示例**:
```
masterpiece, best quality, 1girl, long hair, blue eyes, white dress:1.5 COUPLE MASK(0 0.5, 0 1) 1boy, short hair, green eyes, black shirt:0.8 COUPLE MASK(0.5 1, 0 1)
```

### 2.2 使用羽化效果创建平滑过渡

**目标**: 在角色边界创建平滑过渡效果

**步骤**:
1. 创建两个角色
2. 右键点击蒙版，选择"羽化设置"
3. 设置羽化值为 10 像素
4. 观察生成的提示词变化

**生成的提示词示例**:
```
masterpiece, best quality, 1girl, long hair, blue eyes, white dress COUPLE MASK(0 0.5, 0 1) FEATHER(10) 1boy, short hair, green eyes, black shirt COUPLE MASK(0.5 1, 0 1) FEATHER(10)
```

### 2.3 使用透明度实现层次效果

**目标**: 创建半透明的角色叠加效果

**步骤**:
1. 创建两个角色，确保蒙版区域有重叠
2. 右键点击上层蒙版，选择"透明度设置"
3. 设置透明度为 70%
4. 观察效果

**生成的提示词示例**:
```
1girl, long hair, blue eyes, white dress COUPLE MASK(0 0.6, 0 1) 1boy, short hair, green eyes, black shirt COUPLE MASK(0.4 1, 0 1)
```
*注意: 透明度需要在实际生成时通过其他工具实现，这里主要展示蒙版重叠*

## 3. 复杂场景示例

### 3.1 创建多人聚会场景

**目标**: 创建一个5人聚会场景，包含不同性别和特征

**步骤**:
1. 创建5个角色，配置如下：

| 角色 | 提示词 | 权重 | 颜色 | 蒙版位置 |
|------|--------|------|------|----------|
| 女孩1 | 1girl, long hair, smile | 1.2 | #FF6B6B | 左上 (0.0-0.4, 0.0-0.5) |
| 男孩1 | 1boy, short hair, laugh | 1.0 | #4ECDC4 | 右上 (0.6-1.0, 0.0-0.5) |
| 女孩2 | 1girl, ponytail, wave | 0.9 | #FF9FF3 | 左下 (0.0-0.4, 0.5-1.0) |
| 男孩2 | 1boy, glasses, serious | 0.8 | #54A0FF | 右下 (0.6-1.0, 0.5-1.0) |
| 男孩3 | 1boy, hat, cheerful | 1.1 | #FFEAA7 | 中间 (0.4-0.6, 0.3-0.7) |

2. 调整蒙版位置，确保合理分布
3. 选择合适的语法模式

**生成的提示词示例**:
```
masterpiece, best quality, group photo, outdoor 
COUPLE MASK(0 0.4, 0 0.5) 1girl, long hair, smile:1.2 
COUPLE MASK(0.6 1, 0 0.5) 1boy, short hair, laugh:1.0 
COUPLE MASK(0 0.4, 0.5 1) 1girl, ponytail, wave:0.9 
COUPLE MASK(0.6 1, 0.5 1) 1boy, glasses, serious:0.8 
COUPLE MASK(0.4 0.6, 0.3 0.7) 1boy, hat, cheerful:1.1
```

### 3.2 创建角色与背景组合

**目标**: 创建角色与特定背景的组合

**步骤**:
1. 创建角色 (女孩)
   - 提示词: 1girl, beautiful, smile
   - 权重: 1.3
   - 蒙版位置: 中央区域 (0.2-0.8, 0.2-0.8)
2. 创建背景角色
   - 名称: 背景
   - 提示词: cherry blossoms, park, beautiful scenery
   - 权重: 0.7
   - 蒙版位置: 全图 (0.0-1.0, 0.0-1.0)
3. 调整角色权重，确保角色突出

**生成的提示词示例**:
```
cherry blossoms, park, beautiful scenery:0.7 COUPLE MASK(0 1, 0 1) 
COUPLE MASK(0.2 0.8, 0.2 0.8) 1girl, beautiful, smile:1.3
```

## 4. 模板使用示例

### 4.1 使用预设模板快速创建角色

**目标**: 使用内置模板快速创建常见角色类型

**步骤**:
1. 点击"模板"按钮
2. 选择"长发女孩"模板
3. 系统自动创建角色并填充默认属性
4. 根据需要调整提示词和权重

**自动生成的角色**:
- 名称: 长发女孩
- 提示词: 1girl, long hair, beautiful
- 权重: 1.0
- 颜色: #FF9FF3

### 4.2 创建自定义模板

**目标**: 保存常用角色配置为自定义模板

**步骤**:
1. 创建并配置一个角色
2. 修改配置文件，添加到模板列表
4. 重启编辑器，新模板将可用

## 5. 工作流集成示例

### 5.1 与其他ComfyUI节点结合使用

**目标**: 将多人角色编辑器与其他节点组合使用

**示例工作流**:
1. **多人角色编辑器** → 生成提示词
2. **CLIP文本编码** → 编码提示词
3. **KSampler** → 生成图像
4. **图像放大** → 提高图像质量

**连接方式**:
- 将多人角色编辑器的"generated_prompt"输出连接到CLIP文本编码器的"文本"输入
- 将CLIP文本编码器的"conditioning"输出连接到KSampler的"conditioning"输入

### 5.2 批量生成不同配置

**目标**: 使用相同角色配置生成不同风格的结果

**步骤**:
1. 在多人角色编辑器中配置好角色和蒙版
2. 修改基础提示词部分，添加不同的风格关键词
3. 生成多种变体

**配置示例**:
```json
{
  "base_prompt": "masterpiece, best quality",
  "characters": [...],
  "syntax_mode": "attention_couple"
}
```

**变体示例**:
- 基础提示词: "masterpiece, best quality"
- 艺术风格: "masterpiece, best quality, anime style"
- 摄影风格: "masterpiece, best quality, photographic"
- 水彩风格: "masterpiece, best quality, watercolor painting"

## 6. 故障排除示例

### 6.1 常见问题及解决方案

**问题1: 生成的提示词格式不正确**
- **症状**: 提示词中缺少COUPLE或MASK关键字
- **解决方案**: 检查语法模式设置，确保选择了正确的模式
- **验证步骤**: 点击"验证"按钮检查语法

**问题2: 角色蒙版显示异常**
- **症状**: 蒙版不显示或位置错误
- **解决方案**: 检查角色是否启用，确保蒙版数据正确
- **验证步骤**: 查看角色列表中的启用状态

- **验证步骤**: 使用在线JSON验证工具检查文件

### 6.2 性能优化建议

**场景1: 角色数量较多时**
- **建议**: 关闭实时预览，降低网格密度
- **方法**: 在工具栏中关闭"预览"按钮，调整网格大小

**场景2: 复杂蒙版布局时**
- **建议**: 使用较大的画布尺寸，简化蒙版形状
- **方法**: 选择更大的预设尺寸，避免蒙版过度重叠

## 7. 最佳实践

### 7.1 角色配置建议

1. **提示词编写**
   - 使用具体、描述性的标签
   - 避免冲突的属性描述
   - 合理控制标签数量

2. **权重设置**
   - 主角权重建议在1.2-1.5之间
   - 配角权重建议在0.7-1.0之间
   - 背景权重建议在0.5-0.8之间

3. **颜色选择**
   - 选择对比度高的颜色便于区分
   - 保持颜色风格一致性
   - 考虑与角色特征的关联性

### 7.2 蒙版布局建议

1. **区域划分**
   - 避免蒙版区域过度重叠
   - 为重要角色分配更大区域
   - 考虑角色之间的空间关系

2. **边界处理**
   - 使用羽化效果创建平滑过渡
   - 避免蒙版紧贴画布边缘
   - 留出适当的边界空间

### 7.3 工作流建议

1. **配置管理**
   - 为不同场景创建专用配置
   - 使用版本控制管理配置变更

2. **测试验证**
   - 使用验证功能检查语法
   - 生成小尺寸图像测试效果
   - 根据结果调整参数

## 8. 进阶技巧

### 8.1 创建动态场景

**目标**: 创建角色位置和属性可变的动态场景

**方法**:
1. 使用脚本自动化配置更新
2. 结合动画节点实现角色移动
3. 使用条件逻辑控制角色显示

### 8.2 批量处理

**目标**: 批量处理多个角色配置

**方法**:
1. 编写脚本批量生成配置文件
2. 使用API接口自动化配置管理
3. 创建配置模板批量应用

### 8.3 自定义扩展

**目标**: 扩展编辑器功能以满足特定需求

**方法**:
1. 修改源代码添加自定义功能
2. 创建自定义模板和预设
3. 开发插件扩展编辑器能力

---

通过这些示例，您应该能够充分利用多人角色提示词编辑器的强大功能，创建出丰富多样的角色场景。如需更多帮助，请参考用户指南或联系技术支持。